<html>
<body>
    <h1>AAAAA</h1>
    <div id="inputText">---<BR></div>
    <ul id="messageList" />

    <!-- ライブラリの読み込み -->
    
    <script src="https://cdn.socket.io/4.5.0/socket.io.min.js" integrity="sha384-7EyYLQZgWBi67fBtVxw60/OWl1kjsfrPFcaU0pp0nAh+i8FD068QogUvg85Ewy1k" crossorigin="anonymous"></script>
    
     <script>
         function AddToList(str) {
             document.getElementById("inputText").innerHTML += `${str}<BR/>`;
         }

         // サーバーへ接続
         const socket = io("ws://localhost:8080", { transports: ['websocket'] });
         socket.on("connect", () => {
             AddToList("connection OK");
             // send a message to the server
             socket.emit("hello from client", {});
         });

         // receive a message from the server
         socket.on("hello from server", () => {
             AddToList("hello from server");
        });
        socket.on("error", () => {
            // ...
            AddToList("error");
        });
         socket.on("disconnect", () => {
             AddToList("disconnected");
         });
         
         socket.on("connect_error", (err) => {
             AddToList(err);
             setTimeout(() => {
                 socket.connect();
             }, 1000);
         });
    </script>
</body>
</html>
